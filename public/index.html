<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <form method="post">
    <table>
      <tr>
        <td><label>아이디</label></td>
        <td><input type="text" name="id" id="id"></td>
      </tr>
      <tr>
        <td><label>이름</label></td>
        <td><input type="text" name="name" id="name"></td>
      </tr>
      <tr>
        <td><label>메타마스크링크</label></td>
        <td><input type="text" name="metamask" id="metamask"></td>
      </tr>
      <tr>
        <td><label>비밀번호</label></td>
        <td><input type="password" name="password" id="password"></td>
      </tr>
      <tr>
        <td><label>비밀번호 확인</label></td>
        <td><input type="password" name="passwordCheck" id="passwordCheck"></td>
      </tr>
    </table>
    <button type="button" id="register">회원가입</button>
  </form>

  <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-storage.js"></script>

  <script>
    var firebaseConfig = {
      apiKey: "AIzaSyDYu8NfIoLK2iQj-3PTmcYRGmqS5B3f4Uo",
      authDomain: "dbpbl-13bbf.firebaseapp.com",
      databaseURL: "https://dbpbl-13bbf-default-rtdb.firebaseio.com",
      projectId: "dbpbl-13bbf",
      storageBucket: "dbpbl-13bbf.appspot.com",
      messagingSenderId: "379273770681",
      appId: "1:379273770681:web:b25788b8098ffb4a7c8d68",
      measurementId: "G-EN3FK5T60E"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
  </script>
  <script>
    /*
    //데이터 가져오기
    const db = firebase.firestore();
    db.collection('user').get().then((결과)=>{
    console.log(결과)
  })*/
    const db = firebase.firestore();


    //비밀번호&비밀번호 확인 값 비교->같을 때 db에 추가되는 코드 추가하기

    $('#register').click(function () {  //회원가입 버튼을 클릭한 결과
      if ($('#password').val() == $('#passwordCheck').val()) {
        var user = {
          id: $('#id').val(),
          name: $('#name').val(),
          metamask: $('#metamask').val(),
          password: $('#password').val(),
        }
        db.collection('user').doc($('#id').val()).set(user).then((result) => {
          console.log(result);
        }).catch((error) => {
          console.log("error");
        })
      }
      else {
      //비밀번호 확인하라는 메시지 띄우기
      alert("비밀번호를 확인해주세요");
      

    }
    });
    
  
  </script>

</body>

</html>